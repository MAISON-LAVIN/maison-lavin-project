<template>
  <lightning-card title="주소 검색" icon-name="utility:location">
    <div class="slds-p-around_medium">
      <!-- 주소 검색 버튼 -->
      <div class="slds-m-bottom_small">
        <lightning-button
          label="주소 검색"
          icon-name="utility:search"
          onclick={handleAddressSearch}
          variant="brand"
        >
        </lightning-button>
      </div>

      <!-- 검색된 주소 표시 -->
      <template if:true={hasAddress}>
        <div class="address-result">
          <lightning-input label="우편번호" value={postalCode} readonly>
          </lightning-input>

          <lightning-input
            label="기본 주소"
            value={address}
            readonly
            class="slds-m-top_small"
          >
          </lightning-input>

          <lightning-input
            label="상세 주소"
            value={detailAddress}
            onchange={handleDetailChange}
            placeholder="상세 주소를 입력하세요"
            class="slds-m-top_small"
          >
          </lightning-input>
        </div>
      </template>

      <!-- 주소 검색 팝업 (iframe) -->
      <template if:true={showPopup}>
        <section
          role="dialog"
          tabindex="-1"
          class="slds-modal slds-fade-in-open"
        >
          <div class="slds-modal__container">
            <header class="slds-modal__header">
              <h2 class="slds-text-heading_medium">주소 검색</h2>
              <button
                class="slds-button slds-button_icon slds-modal__close"
                onclick={closePopup}
              >
                <lightning-icon
                  icon-name="utility:close"
                  alternative-text="닫기"
                  size="small"
                >
                </lightning-icon>
              </button>
            </header>
            <div class="slds-modal__content" lwc:dom="manual"></div>
          </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
      </template>
    </div>
  </lightning-card>
</template>